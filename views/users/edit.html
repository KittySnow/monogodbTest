<!DOCTYPE html><html lang="zh" class="ie9 no-js"><head>	<meta charset="utf-8" />	<title>Metronic | Admin Dashboard Template</title>	<meta content="width=device-width, initial-scale=1.0" name="viewport" />	<meta content="" name="description" />	<meta content="" name="author" />	<link href="../media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-metro.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-responsive.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>	<link href="../media/css/uniform.default.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/daterangepicker.css" rel="stylesheet" type="text/css" />	<link href="../media/css/fullcalendar.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>	<link href="../media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>	<link rel="shortcut icon" href="../media/image/favicon.ico" />	<style>		.page-sidebar .sidebar-toggler{margin-bottom:10px;}		.form form.user-form{margin:80px 0px 0px !important;}		.user-form .m-wrap.small{width:225px !important;}		.pr10{padding-right:10px}		.mt10{margin-top:10px;}	</style></head><body class="page-header-fixed"><% include ../common/header.html %><div class="page-container">	<% include ../common/aside.html %>	<div class="page-content">		<div class="container-fluid">			<div class="row-fluid">				<div class="span12">					<h3 class="page-title">通讯录</h3>					<ul class="breadcrumb">						<li>							<i class="icon-home"></i><a href="index.html">首页</a><span class="icon-angle-right"></span>						</li>						<li>							<a href="/users/">通讯录</a><span class="icon-angle-right"></span>						</li>						<li><a href="/users/edit">修改通讯录</a></li>					</ul>				</div>			</div>			<div class="row-fluid">				<div class="span12">					<div class="portlet box blue tabbable">						<div class="portlet-title">							<div class="caption">								<i class="icon-reorder pr10"></i>								<span class="hidden-480">修改联系人</span>							</div>						</div>						<div class="portlet-body form">							<div class="tabbable portlet-tabs">								<div class="tab-content">									<div class="tab-pane active" id="portlet_tab1">										<form action="/users/doedit" method="post" class="form-horizontal user-form" onsubmit="return validateForm(this)" name="myform">											<!--<div class="control-group ">												<label class="control-label">上传头像</label>												<div class="controls" style="position: relative">													<input type="file" style="position: absolute;top: 0px;left: 0px;display: inline-block;width: 120px;height: 20px;opacity: 0;z-index: 999" name="pic"/>													<button style="position: absolute;top: 0px;left: 0px;display: inline-block;width: 120px;height: 34px;background-color: #4d90fe;border: 0;border-radius: 8px !important;font-family: 'Microsoft YaHei';font-size: 14px;text-align: center;color: #fff;line-height: 34px">点击上传头像</button>												</div>											</div>-->											<input type="hidden" name="_id" value="<%= user %>">											<div class="control-group">												<label class="control-label">姓名：</label>												<div class="controls">													<input type="text" placeholder="输入姓名" class="m-wrap small smore" name="name" maxlength="50" id="name"/>													<span class="help-inline"></span>												</div>											</div>											<div class="control-group">												<label class="control-label">联系电话：</label>												<div class="controls">													<input type="number" placeholder="输入号码" class="m-wrap small" name="tel" id="tel"  value="15858120414"/>													<span class="help-inline"></span><button type="button" onclick="addRow(this)" class="btn blue"><i></i>+</button>												</div>											</div>											<div class="control-group">												<label class="control-label">备注：</label>												<div class="controls">													<input type="text" placeholder="输入备注" class="m-wrap small" name="memo" value="222" id="memo"/>													<span class="help-inline"></span>												</div>											</div>											<div class="form-actions">												<button type="submit" class="btn blue"><i class="icon-ok"></i> 保存</button>												<button type="reset" class="btn">重置</button>											</div>										</form>									</div>								</div>							</div>						</div>					</div>				</div>			</div>		</div>	</div></div><% include ../common/footer.html %><script>	$(function () {		$.ajax({			type: 'get',			url:'../users/query',			data: {_id:"<%= user %>"}		}).done(function(res) {			$('#tel').val(res.tel);			$('#name').val(res.name);			$('#memo').val(res.memo);		}).fail(function(res) {		});	});	function addRow(dom){		dom.style.display="none";		var add =dom.parentNode.cloneNode(true);		add.className += ' mt10';		add.childNodes[4].style.display="inline-block";		add.childNodes[1].value='';		dom.parentNode.parentNode.appendChild(add);	}	function validateForm(form){		if(form.name.value==null || form.name.value==''){			alert('请填写姓名');			return false;		}else if(form.name.value.length>50){			alert('最多输入50个字');			return false;		}		if(document.getElementsByName('tel').length==1){			if(!/^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/gi.test(form.tel.value)) {				alert('请输入11位手机号码');				return false;			}		}else{			for(var i=0;i<document.getElementsByName('tel').length;i++){				if(!/^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])\d{8}$/gi.test(form.tel[i].value))				{					alert('请输入11位手机号码');					return false;				}			}		}		function Check(s) {			var str = s.replace(/%/g, "%25 ").replace(/\+/g, "%2B ").replace(/\s/g, "+ ");   //   %   +   \s			str = str.replace(/-/g, "%2D ").replace(/\*/g, "%2A ").replace(/\//g, "%2F ");   //   -   *   /			str = str.replace(/\&/g, "%26 ").replace(/!/g, "%21 ").replace(/\=/g, "%3D ");   //   &   !   =			str = str.replace(/\?/g, "%3F ").replace(/:/g, "%3A ").replace(/\|/g, "%7C ");   //   ?   :   |			str = str.replace(/\,/g, "%2C ").replace(/\./g, "%2E ").replace(/#/g, "%23 ");   //   ,   .   #			return str;		}		form.memo.value = Check(form.memo.value);		$.ajax({			type: 'post',			url:'/users/doEdit',			data: {_id:"<%= user %>",name:$('#name').val(),tel:$('#tel').val(),memo:$('#memo').val()			}		}).done(function(res) {			if(res.code==200){				window.location.href="/users/"			}else{				alert('增加失败')			}		}).fail(function(res) {		});		return false;	}</script></body></html>