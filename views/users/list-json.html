<!DOCTYPE html><html lang="zh" class="ie9 no-js"><head>	<meta charset="utf-8" />	<title>Metronic | Admin Dashboard Template</title>	<meta content="width=device-width, initial-scale=1.0" name="viewport" />	<meta content="" name="description" />	<meta content="" name="author" />	<link href="../media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-metro.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-responsive.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>	<link href="../media/css/uniform.default.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/daterangepicker.css" rel="stylesheet" type="text/css" />	<link href="../media/css/fullcalendar.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>	<link href="../media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>	<link rel="shortcut icon" href="../media/image/favicon.ico" />	<style>		.page-sidebar .sidebar-toggler{margin-bottom:10px;}		.fr{float:right}	</style></head><body class="page-header-fixed">	<% include ../common/header.html %>	<div class="page-container">		<% include ../common/aside.html %>		<div class="page-content">			<div class="container-fluid">				<div class="row-fluid">					<div class="span12">						<h3 class="page-title">通讯录列表</h3>						<ul class="breadcrumb">							<li><i class="icon-home"></i><a href="index.html">主页</a><i class="icon-angle-right"></i></li>							<li><a href="/users/queryAll">通讯录</a><i class="icon-angle-right"></i></li>							<li><a href="/users/queryAll">通讯录列表</a></li>						</ul>					</div>				</div>				<div class="row-fluid">					<div class="span12">						<div class="portlet box blue">							<div class="portlet-title">								<div class="caption"><i class="icon-edit"></i>通讯录列表</div>								<div class="tools">									<a href="javascript:;" class="collapse"></a>									<a href="#portlet-config" data-toggle="modal" class="config"></a>									<a href="javascript:;" class="reload"></a>								</div>							</div>							<div class="portlet-body">								<div class="clearfix">									<div class="btn-group">										<button id="sample_editable_1_new" class="btn green" onclick="window.location.href='/users/add'">											增加通讯录 <i class="icon-plus"></i>										</button>									</div>									<div class="fr">										<div class="dataTables_filter" id="sample_2_filter">											<label>搜索: <input type="text" aria-controls="sample_2" class="m-wrap medium"></label>										</div>									</div>								</div>								<table class="table table-striped table-hover table-bordered" id="sample"  data-unique-id="_id">									<thead>									<tr>										<th>ID</th>										<th>Name</th>										<th>Memo</th>									</tr>									</thead>								</table>							</div>						</div>					</div>				</div>			</div>		</div>	</div>	<% include ../common/footer.html %>	<script>		window.actionModelListEvents = {			'click .editModel' : function (e, value, row, index) {			},			'click .delModel' : function (e, value, row, index) {				if(confirm('是否确认删除')){					$.ajax({						type: 'post',						url:'../users/deleteUser',						data: {_id:row._id}					}).done(function(res) {						$('table').bootstrapTable('removeByUniqueId', row._id);					}).fail(function(res) {					});				}			}		};		function ModelListStausFormatter(value,row) {			return '<a class="btn btn-info btn-sm editModel"  href="/users/edit?_id='+row._id+'">修改</a> <button class="btn btn-warning btn-sm delModel">删除</button>'		}		function fmtIdx1(value, row, index) {			return index+1;		}		$(document).ready(function(){			$("#sample").bootstrapTable({				showHeader:true,				columns: [					{						field: 'index',						formatter:fmtIdx1,						title:'编号',						width:80					},{						field: '_id',						title: 'id',						width:80					},{						field: 'name',						title: '名称',						width:100					}, {						field: 'tel',						title: '联系方式'					}, {						field: 'memo',						title: '备注',						width:200					}, {						title: '操作',						width:250,						formatter: ModelListStausFormatter,						events: actionModelListEvents					}],				method: 'GET',				url: "/users/queryAll",				showColumns:true,				pagination:true,				cache: false,				striped: true,				sidePagination: 'client', // client or server				pageNumber: 1,				pageSize: 10,				pageList: [5,10,15],				paginationHAlign: 'right', //right, left				paginationVAlign: 'bottom', //bottom, top, both				sortable:false,				search: true,				showPaginationSwitch: false,				showRefresh: true,				clickToSelect: true			});		});	function remove1(id){		if(confirm('是否删除？')){			id = +id;			$.ajax({				url:'/users/deleteUser',				type:'get',				timeout:'5000',				async:'true',				data:{id:id},				dataType:'JSON',				beforeSend:function(){console.log('准备删除')},				success:function(data){					console.log(data);					console.log('yi删除');					$('#del'+id).parent().parent().fadeOut(1000);				},				error:function(){					alert('有错误，删除失败')				}			});		}	}	</script></body></html>